<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>List Exports</title>
  </head>
  <body>
    <h1 id="title"></h1>
    <div id="app"></div>
    <pre id="pre"></pre>
    <script>
      fetch('/get-folder-data', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          path: new URL(location.href).searchParams.get('path') || './helpers',
        }),
      }).then((response) => {
        response.json().then((data) => {
          data.data.map((item) => {
            const title = document.createElement('h2')
            title.innerHTML = item.file
            document.getElementById('app').appendChild(title)

            item.exports.map((exported) => {
              const div = document.createElement('div')
              div.innerHTML = `[${exported.type}] - <strong>${exported.name}</strong>`
              document.getElementById('app').appendChild(div)
            })
          })

          document.getElementById('pre').innerHTML = JSON.stringify(data, null, 2)
        })
      })
    </script>
  </body>
</html>
